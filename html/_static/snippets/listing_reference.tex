\lstinputlisting[caption=Example C++, label={lst:listing-cpp}, language=C++]{code_sample.cpp}

An example table can be seen in \ref{lst:listing-cpp}.
Also note how the "Listing" prefix is automatically added within the document text whenever the reference is called.